<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khaled and Manna's Space</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #ffeef5; /* soft powdery pink */ 
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .tanks {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
    }
    .tank {
      width: 48%;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      background: #ebebeb; /* light gray */ 
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .progress {
      width: 100%;
      height: 30px;
      border-radius: 5px;
      background: #ddd;
      margin: 10px 0;
      overflow: hidden;
      }
    .progress-fill {
      height: 100%;
      width: 0%;
      transition: width 0.3s;
    }
    .khaled .progress-fill {
      background: indigo;
    }
    .manna .progress-fill {
      background: hotpink;
    }
    button {
      margin: 5px;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
    	opacity: 0.8;
    }
    .section {
      margin: 20px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      padding: 5px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
    }
    .actions button {
      margin-left: 5px;
    }
  </style>
</head>
<body>
  <h1>Khaled and Manna's Space</h1>
    <!-- Love Tanks -->
  <div class="tanks">
    <div class="tank khaled">
      <h3>Khaled's Tank</h3>
      <div class="progress"><div class="progress-fill" id="khaled-fill"></div></div>
<button onclick="updateTank('khaled', -20)">-</button>
<button onclick="updateTank('khaled', 20)">+</button>

    </div>
    <div class="tank manna">
      <h3>Manna's Tank</h3>
      <div class="progress"><div class="progress-fill" id="manna-fill"></div></div>
  <button onclick="updateTank('manna', -20)">-</button>
  <button onclick="updateTank('manna', 20)">+</button>
    </div>
  </div>

  <!-- Notes -->
  <div class="section">
    <h3>Notes üíå</h3>
    <input type="text" id="noteInput" placeholder="Write a note...">
    <button onclick="addNote()">Add Note</button>
    <ul id="notesList"></ul>
  </div>
    <!-- Topics -->
  <div class="section">
    <h3>Topics to Talk About üí≠</h3>
    <input type="text" id="topicInput" placeholder="Add a topic...">
    <button onclick="addTopic()">Add Topic</button>
    <ul id="topicsList"></ul>
  </div>

  <!-- To-Do List -->
  <div class="section">
    <h3>To-Do List üóíÔ∏è</h3>
    <input type="text" id="todoInput" placeholder="Suggest an activity...">
    <button onclick="addTodo()">Add Request</button>
    <h4>Pending Requests</h4>
    <ul id="pendingList"></ul>
    <h4>Approved Activities</h4>
    <ul id="approvedList"></ul>
  </div>
    <!-- Firebase + JS -->
  <script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, setDoc, getDoc, updateDoc, onSnapshot, collection, addDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // TODO: replace with your Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Init Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
        // Tanks
    async function updateTank(person, change) {
      const ref = doc(db, "tanks", "levels");
      const snap = await getDoc(ref);
      let data = snap.exists() ? snap.data() : { khaled: 0, manna: 0 };
      data[person] = Math.max(0, Math.min(100, (data[person] || 0) + change));
      await setDoc(ref, data);
    }

    onSnapshot(doc(db, "tanks", "levels"), (docSnap) => {
      if (docSnap.exists()) {
        const data = docSnap.data();
        document.getElementById("khaled-fill").style.width = data.khaled + "%";
        document.getElementById("manna-fill").style.width = data.manna + "%";
      }
    });

    // Notes
    async function addNote() {
      const val = document.getElementById("noteInput").value;
      if (val.trim() === "") return;
      await addDoc(collection(db, "notes"), { text: val });
      document.getElementById("noteInput").value = "";
    }
onSnapshot(collection(db, "notes"), (snapshot) => {
      const list = document.getElementById("notesList");
      list.innerHTML = "";
      snapshot.forEach((doc) => {
        let li = document.createElement("li");
        li.textContent = doc.data().text;
        list.appendChild(li);
      });
    });

    // Topics
    async function addTopic() {
      const val = document.getElementById("topicInput").value;
      if (val.trim() === "") return;
      await addDoc(collection(db, "topics"), { text: val, done: false });
      document.getElementById("topicInput").value = "";
    }
onSnapshot(collection(db, "topics"), (snapshot) => {
      const list = document.getElementById("topicsList");
      list.innerHTML = "";
      snapshot.forEach((docSnap) => {
        let data = docSnap.data();
        let li = document.createElement("li");
        li.innerHTML = `<label><input type="checkbox" ${data.done ? "checked" : ""}> ${data.text}</label>`;
        li.querySelector("input").addEventListener("change", async (e) => {
          await updateDoc(doc(db, "topics", docSnap.id), { done: e.target.checked });
        });
        list.appendChild(li);
      });
    });

    // To-Do List
    async function addTodo() {
      const val = document.getElementById("todoInput").value;
      if (val.trim() === "") return;
      await addDoc(collection(db, "todos"), { text: val, status: "pending" });
      document.getElementById("todoInput").value = "";
    }
    onSnapshot(collection(db, "todos"), (snapshot) => {
      const pending = document.getElementById("pendingList");
      const approved = document.getElementById("approvedList");
      pending.innerHTML = "";
      approved.innerHTML = "";
      snapshot.forEach((docSnap) => {
        let data = docSnap.data();
        let li = document.createElement("li");
        li.textContent = data.text;
        if (data.status === "pending") {
          let div = document.createElement("div");
          div.classList.add("actions");
          let approveBtn = document.createElement("button");
          approveBtn.textContent = "‚úî";
          approveBtn.onclick = async () => await updateDoc(doc(db, "todos", docSnap.id), { status: "approved" });
          let declineBtn = document.createElement("button");
          declineBtn.textContent = "‚úñ";
          declineBtn.onclick = async () => await deleteDoc(doc(db, "todos", docSnap.id));
          div.appendChild(approveBtn);
          div.appendChild(declineBtn);
          li.appendChild(div);
          pending.appendChild(li);
        } else if (data.status === "approved") {
          approved.appendChild(li);
        }
              });
    });
  </script>
</body>
</html>